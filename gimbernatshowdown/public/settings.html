<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Showdown - Settings</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="container">
        <!-- Incluye el header -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $(function(){
                $("#header").load("header.html"); 
            });
        </script>
        <div id="header"></div>
        <!-- Fin del include -->

        <!-- Contenido específico de la página de Settings -->
        <div class="settings-page-content">
            <div id="login-form" class="settings-form">
                <h2>Registro</h2>

                <!-- Formulario de configuración -->
                <div class="form-group">
                    <label for="username">Nombre de usuario</label>
                    <input type="text" id="username" name="username">
                </div>

                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" name="password">
                </div>

                <div class="form-group">
                    <label for="confirm-password">Confirmar contraseña</label>
                    <input type="password" id="confirm-password" name="confirm-password">
                </div>

                <button id="confirm-button">Confirmar</button>
            </div>
        </div>
        <!-- Fin del contenido específico -->

        <!-- Incluye el footer -->
        <script>
            $(function(){
                $("#footer").load("footer.html"); 
            });
        </script>
        <div id="footer"></div>
        <!-- Fin del include -->
    </div>
    <!-- Agrega esta secuencia de script al final de tu archivo HTML -->
    <script>
        document.getElementById('confirm-button').addEventListener('click', async () => {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            // Verifica si las contraseñas coinciden
            if (password !== confirmPassword) {
                alert('Las contraseñas no coinciden');
                return;
            }

            // Envía los datos del formulario al servidor
            const response = await fetch('/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username, password })
            });

            // Maneja la respuesta del servidor
            if (response.ok) {
                // Usuario registrado exitosamente
                console.log('Usuario registrado exitosamente');
                window.location.href = 'index.html';
            } else {
                // Error al registrar usuario
                console.error('Error al registrar usuario');
            }
        });
    </script>

</body>
</html>
